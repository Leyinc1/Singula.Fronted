# ğŸ” Diagrama de Flujos - Sistema de AutenticaciÃ³n

## ğŸ“Š Flujo General de AutenticaciÃ³n

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SINGULA - Sistema de AutenticaciÃ³n             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                          USUARIO NO AUTENTICADO
                                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                            â”‚
            OpciÃ³n 1: LOGIN            OpciÃ³n 2: REGISTER
                    â”‚                            â”‚
                    â–¼                            â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  /login       â”‚            â”‚  /register     â”‚
            â”‚  LoginPage.   â”‚            â”‚  RegisterPage. â”‚
            â”‚  vue          â”‚            â”‚  vue           â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                            â”‚
                    â”‚ Email + Password          â”‚ Email + Password
                    â”‚ Click "Iniciar SesiÃ³n"   â”‚ + Datos + Click Register
                    â”‚                            â”‚
                    â–¼                            â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚     authService.login(email, password)       â”‚
            â”‚              o                               â”‚
            â”‚     authService.register(userData)           â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                     â”‚
            POST /auth/login      POST /auth/register
                    â”‚                     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Backend Validation â”‚
                    â”‚  - Email exists?     â”‚
                    â”‚  - Password correct? â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                             â”‚
              âœ… OK                        âŒ ERROR
                â”‚                             â”‚
                â–¼                             â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  { token, user } â”‚        â”‚ { error msg }   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Save to:        â”‚        â”‚ Show Error        â”‚
        â”‚ - localStorage  â”‚        â”‚ Notification      â”‚
        â”‚ - authStore     â”‚        â”‚ Keep on page      â”‚
        â”‚ - cookies (opt) â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Redirect to /    â”‚
        â”‚ (Dashboard)      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
        USUARIO AUTENTICADO âœ…
```

---

## ğŸ”’ ProtecciÃ³n de Rutas

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Router Guards (src/router/index.js)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Usuario intenta acceder a una ruta                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Â¿Es ruta pÃºblica?            â”‚
        â”‚ (/login, /register)          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    âœ…â”‚âŒ
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                â”‚
        SÃ (pÃºblico)    NO (protegida)
              â”‚                â”‚
              â–¼                â–¼
        Allow             Â¿Usuario autenticado?
        (ir a ruta)        (authStore.token?)
                           â”‚
                      âœ…â”‚âŒ
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                â”‚
            SÃ (auth)         NO (no auth)
                  â”‚                â”‚
                  â–¼                â–¼
              Â¿Requiere        Redirect a
              admin?           /login
              (meta.          â”‚
             requiresAdmin?)   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                             â”‚
              âœ…â”‚âŒ                           Return
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                â”‚
     SÃ (admin)    NO (no admin)
        â”‚                â”‚
        â”‚                â–¼
        â”‚             Redirect a /
        â”‚             (dashboard)
        â”‚
        â–¼
    Allow
    (ir a ruta)
```

---

## ğŸ‘¤ Flujo de Registro Detallado

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          FORMULARIO DE REGISTRO (/register)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Usuario llena:
â”œâ”€ Nombre *
â”œâ”€ Apellido *
â”œâ”€ Email * (validado en tiempo real)
â”œâ”€ Departamento * (selector)
â”œâ”€ TelÃ©fono (opcional)
â”œâ”€ ContraseÃ±a * (8+ chars, mayÃºscula, nÃºmero)
â”œâ”€ Confirmar ContraseÃ±a *
â””â”€ âœ“ Acepto tÃ©rminos *

                    â”‚
                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Validaciones Frontend:      â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ âœ“ Email vÃ¡lido (@.com)       â”‚
    â”‚ âœ“ Email no duplicado         â”‚
    â”‚ âœ“ ContraseÃ±as iguales        â”‚
    â”‚ âœ“ ContraseÃ±a fuerte          â”‚
    â”‚ âœ“ Campos requeridos          â”‚
    â”‚ âœ“ TÃ©rminos aceptados         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                â”‚
       âœ… OK         âŒ FALLOS
         â”‚                â”‚
         â”‚                â–¼
         â”‚        Mostrar errores
         â”‚        en formulario
         â”‚        (usuario corrige)
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  POST /auth/register               â”‚
    â”‚  {                                 â”‚
    â”‚    email,                          â”‚
    â”‚    password (hash en backend),    â”‚
    â”‚    nombre,                         â”‚
    â”‚    apellido,                       â”‚
    â”‚    departamento,                   â”‚
    â”‚    rol: 'user' (default),         â”‚
    â”‚    telefono                        â”‚
    â”‚  }                                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                  â”‚
       âœ… CREADO        âŒ ERROR
         â”‚                  â”‚
         â”‚                  â–¼
         â”‚        "Email ya registrado"
         â”‚        "Datos invÃ¡lidos"
         â”‚        (mostrar notificaciÃ³n)
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Backend retorna:      â”‚
    â”‚  {                     â”‚
    â”‚    token: "jwt...",    â”‚
    â”‚    user: {             â”‚
    â”‚      id,               â”‚
    â”‚      email,            â”‚
    â”‚      nombre,           â”‚
    â”‚      rol: "user",      â”‚
    â”‚      ...               â”‚
    â”‚    }                   â”‚
    â”‚  }                     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  authStore.setUser(userData)   â”‚
    â”‚  authStore.setToken(token)     â”‚
    â”‚  localStorage.setItem(...)     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  NotificaciÃ³n:                 â”‚
    â”‚  "Â¡Bienvenido a SINGULA!"      â”‚
    â”‚  "Registro exitoso"            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  router.push('/') â† Dashboard  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§‘â€ğŸ’¼ Flujo de GestiÃ³n de Usuarios (Admin)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           USUARIOS PAGE (/users)                        â”‚
â”‚          (Solo visible si rol === 'admin')              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                            â”‚
    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”
    â”‚ Filtros: â”‚         â”‚ Tabla de    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚ usuarios    â”‚
    â”‚ Buscar   â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚Dept.     â”‚         â”‚ Nombre      â”‚
    â”‚ Rol      â”‚         â”‚ Email       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ Departamentoâ”‚
                         â”‚ Rol        â”‚
                         â”‚ Estado      â”‚
                         â”‚ Acciones    â”‚
                         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚               â”‚               â”‚
            â• Crear        âœï¸ Editar      ğŸ—‘ï¸ Eliminar
                â”‚               â”‚               â”‚
                â–¼               â–¼               â–¼

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Dialog:        â”‚ â”‚ Dialog:      â”‚ â”‚ ConfirmaciÃ³n:â”‚
    â”‚  Crear Usuario  â”‚ â”‚ Editar User  â”‚ â”‚ "Â¿Eliminar?" â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ â€¢ Nombre        â”‚ â”‚ â€¢ Nombre     â”‚ â”‚ âœ“ Confirmar â”‚
    â”‚ â€¢ Apellido      â”‚ â”‚ â€¢ Apellido   â”‚ â”‚ âœ— Cancelar  â”‚
    â”‚ â€¢ Email         â”‚ â”‚ â€¢ Email      â”‚ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚ â€¢ TelÃ©fono      â”‚ â”‚ â€¢ TelÃ©fono   â”‚        â”‚
    â”‚ â€¢ Departamento  â”‚ â”‚ â€¢ Depto      â”‚    DELETE
    â”‚ â€¢ Rol *         â”‚ â”‚ â€¢ Rol        â”‚    /users/{id}
    â”‚ â€¢ ContraseÃ±a *  â”‚ â”‚ â€¢ Estado     â”‚        â”‚
    â”‚ â€¢ Estado        â”‚ â”‚              â”‚        â–¼
    â”‚                 â”‚ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    NotificaciÃ³n:
    â”‚ [Guardar]       â”‚        â”‚            "Eliminado"
    â”‚ [Cancelar]      â”‚     PUT /users/{id}
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
             â”‚                 â”‚
         POST /users           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚                             â”‚
             â–¼                             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Backend guarda   â”‚    â”‚ Backend actualiza    â”‚
    â”‚ usuario nuevo    â”‚    â”‚ usuario existente    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                      â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  NotificaciÃ³n:       â”‚
            â”‚  "Guardado exitoso"  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  fetchUsers() â† Actualizar   â”‚
        â”‚  Tabla con nuevos datos      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Ciclo de Vida de SesiÃ³n

```
INICIO
â”‚
â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ App carga (App.vue)             â”‚
â”‚ - Pinia store inicializa        â”‚
â”‚ - Lee localStorage              â”‚
â”‚ - Obtiene token y user          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Â¿Token en storage? â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        âœ…â”‚âŒ
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                  â”‚
    SÃ (habÃ­a sesiÃ³n)   NO (nueva)
    â”‚                  â”‚
    â–¼                  â–¼
authStore.             Usuario va a
setToken()             /login
    â”‚                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Usuario autenticado â”‚
    â”‚  authStore.token âœ“   â”‚
    â”‚  authStore.user âœ“    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                     â”‚
Navega por       Click Logout
 la app             â”‚
    â”‚               â–¼
    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    â”‚ authStore.logout()   â”‚
    â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚    â”‚ - Limpiar token      â”‚
    â”‚    â”‚ - Limpiar user       â”‚
    â”‚    â”‚ - Limpiar localStorage
    â”‚    â”‚ - Ir a /login        â”‚
    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Usuario no autenticadoâ”‚
    â”‚ authStore.token = null
    â”‚ authStore.user = null
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
        SALIDA
```

---

## ğŸ“± Estados del Usuario

```
User Object en authStore:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ {                          â”‚
â”‚   id: 1,                   â”‚
â”‚   email: "juan@email.com", â”‚
â”‚   nombre: "Juan",          â”‚
â”‚   apellido: "PÃ©rez",       â”‚
â”‚   departamento: "Tech",    â”‚
â”‚   rol: "admin", â—„â”€ Importante
â”‚   telefono: "123456",      â”‚
â”‚   cargado: true,           â”‚
â”‚   created_at: timestamp    â”‚
â”‚ }                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Roles disponibles:
  â€¢ admin â† Acceso total
  â€¢ manager â† Acceso gerencial
  â€¢ user â† Acceso limitado
```

---

## ğŸ›¡ï¸ Niveles de Acceso

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              RUTAS Y ACCESO                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PÃºblica (sin login):
â”œâ”€ /login
â””â”€ /register

Protegida (cualquier usuario autenticado):
â”œâ”€ / (dashboard)
â”œâ”€ /administrar
â”œâ”€ /reports
â”œâ”€ /predictive
â”œâ”€ /notifications
â””â”€ /profile

Solo Admin:
â”œâ”€ /users â—„â”€ GestiÃ³n de usuarios
â””â”€ /config â—„â”€ ConfiguraciÃ³n

Regla: if (meta.requiresAdmin && rol !== 'admin')
       â”œâ”€ redirect to /
       â””â”€ notify "No tienes permisos"
```

---

## ğŸ”Œ IntegraciÃ³n API

```
Frontend                    Backend
(Quasar)                    (Tu API)
â”‚                           â”‚
â”œâ”€ authService â”€POSTâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–º /auth/login
â”‚                           â”‚ (email, password)
â”‚                           â”‚
â”‚  â—„â”€ { token, user }â”€â”€â”€â”€â”€â”€â”¤
â”‚                           â”‚
â”œâ”€ authService â”€POSTâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–º /auth/register
â”‚                           â”‚ (email, password, ...)
â”‚                           â”‚
â”‚  â—„â”€ { token, user }â”€â”€â”€â”€â”€â”€â”¤
â”‚                           â”‚
â”œâ”€ authService â”€GETâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º /users?filters
â”‚   (token en header)        â”‚
â”‚                           â”‚
â”‚  â—„â”€ [{ users }]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                           â”‚
â”œâ”€ authService â”€POSTâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–º /users
â”‚   (token en header)        â”‚ (nombre, email, ...)
â”‚                           â”‚
â”‚  â—„â”€ { id, ... }â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                           â”‚
â”œâ”€ authService â”€PUTâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º /users/{id}
â”‚   (token en header)        â”‚ (updated data)
â”‚                           â”‚
â”‚  â—„â”€ { updated }â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                           â”‚
â””â”€ authService â”€DELETEâ”€â”€â”€â”€â”€â”€â”€â”€â–º /users/{id}
    (token en header)        â”‚
                            â”‚
    â—„â”€ { success }â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
```

---

## âš™ï¸ Variables Globales Disponibles

```javascript
// En cualquier componente Vue:

import { useAuthStore } from 'src/stores/authStore'
const authStore = useAuthStore()

// Estado:
authStore.token           // JWT token
authStore.user            // Usuario actual
authStore.loading         // Â¿Cargando?

// Computados:
authStore.isAuthenticated // boolean
authStore.userName        // nombre del user
authStore.userEmail       // email del user
authStore.userRole        // rol del user

// MÃ©todos:
await authStore.login(email, password)
await authStore.register(userData)
await authStore.logout()
await authStore.getCurrentUser()
await authStore.updateProfile(data)
await authStore.changePassword(old, new)
```

---

## ğŸ“‹ Resumen Visual

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  SINGULA AUTH SYSTEM                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  Componentes:                                            â”‚
â”‚  â”œâ”€ RegisterPage.vue â—„â”€ Login pÃºblico                   â”‚
â”‚  â”œâ”€ LoginPage.vue â—„â”€ Login pÃºblico                      â”‚
â”‚  â”œâ”€ UsersPage.vue â—„â”€ Panel admin                        â”‚
â”‚  â””â”€ MainLayout.vue â—„â”€ MenÃº protegido                    â”‚
â”‚                                                          â”‚
â”‚  Servicios:                                              â”‚
â”‚  â””â”€ authService.js â—„â”€ Conecta con API                   â”‚
â”‚                                                          â”‚
â”‚  Estado:                                                 â”‚
â”‚  â””â”€ authStore (Pinia) â—„â”€ Token y usuario                â”‚
â”‚                                                          â”‚
â”‚  Rutas:                                                  â”‚
â”‚  â”œâ”€ /login, /register â—„â”€ PÃºblico                        â”‚
â”‚  â”œâ”€ /, /administrar, ... â—„â”€ Protegido                   â”‚
â”‚  â””â”€ /users, /config â—„â”€ Solo admin                       â”‚
â”‚                                                          â”‚
â”‚  Base de Datos:                                          â”‚
â”‚  â””â”€ usuarios table â—„â”€ Con rol, departamento, etc        â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**VersiÃ³n:** 1.0.0
**Estado:** âœ… Listo
**Ãšltima actualizaciÃ³n:** 28 Noviembre 2025
